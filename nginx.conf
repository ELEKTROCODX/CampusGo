server {
    listen 80;

    root /usr/share/nginx/html;
    index index.html index.htm;

    location /duca/ {
        alias /usr/share/nginx/html/;
        # Sirve assets bajo /duca y aplica fallback SPA al index en raíz
        try_files $uri $uri/ /index.html;
    }

    # Service Worker bajo /duca: sin caché para permitir actualizaciones
    location = /duca/firebase-messaging-sw.js {
        alias /usr/share/nginx/html/firebase-messaging-sw.js;
        add_header Cache-Control "no-cache" always;
    }
    
    # Fallback general para navegación directa sin Traefik
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    #gzip on;
    #gzip_types text/plain text/css application/javascript application/json image/svg+xml;
}
